<!--Author: Ezra Gerris, Thijs Lacquet and Tanja Markink-->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="main.css">
	<script src="Scripts/Visualizations/visualization.js" type="text/javascript"></script>
	<script src="Scripts/Visualizations/Heatmap.js" type="text/javascript"></script>
	<script src="Scripts/Visualizations/Scarfplot.js" type="text/javascript"></script>
	<script src="Scripts/Visualizations/Scanpath.js" type="text/javascript"></script>
	<script src="Scripts/Visualizations/ParallelScanpath.js" type="text/javascript"></script>
	<script src="Scripts/Visualizations/data.js" type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<!--<link rel="stylesheet" type="text/css" href="../Visualizations/visualization.css">-->
	<title>Test page for linking visualizations</title>

	<script>
		//Input data
			var timestamp = [28719,28802,29268,29568,29801,30118,30368,30551,30717,30884,31084,31217,31500,32116,
			32316,32616,32866,33116,33366,33565,33765,33982,34315,34831,35064,35248,35631,35981, 36948, 37123,
					37205, 37500, 37952, 38123, 38220, 38500, 38700, 38900, 39000, 39200, 39300, 40000, 40200, 40500];
			var duration = new Array(44);
			for (var i = 0; i < 43; i++) {
					duration[i] = timestamp[i + 1] - timestamp[i];
			}
			duration[43] = 500;
			var fixationIndex = [84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,
					108,109,110,111];
			var fixationDuration = [83,466,300,233,316,250,183,167,166,200,133,283,616,200,300,250,250,150,200,200,
					216,333,516,233,183,383,166,166];
			var mappedFixationPointX = [596,480,449,549,927,1108,506,538,645,768,711,735,634,813,691,1061,1108,
			1140,1162,1080,779,708,925,779,830,881,1044,918, 600, 458, 682, 681, 1025, 1006, 586, 145,
			795, 695, 458, 962, 45, 10, 205, 1206];
			var mappedFixationPointY = [362,265,219,351,435,544,300,325,516,1058,998,626,395,396,407,532,574,607,
					643,705,774,972,706,798,767,736,702,717,437,686,860,941,737,720,743,736,768,811,841,905,914,859,
			921,962];
		var user = ['p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1', 'p1',
			'p1', 'p1', 'p1', 'p1', 'p1', 'p2', 'p2', 'p2', 'p2', 'p2', 'p2', 'p2', 'p2', 'p3', 'p3', 'p3',
			'p3', 'p3', 'p3', 'p3', 'p3', 'p3', 'p3', 'p3', 'p3', 'p3', 'p3', 'p3', 'p3'];
		var aoi = [{x1:20, x2:805, y1:20, y2:580},{x1:845, x2:1872, y1:20, y2:580},
			{x1:20, x2:805, y1:620, y2:1180}, {x1:845, x2:1872, y1:620, y2:1180}];
		var imageName = "08_Riga_S1.jpg";
	</script>

</head>
<body>

	<div class="nav">
		<a href="index.htm">Home</a>
		<a href="visualization.htm">Visualization</a>
		<a href="upload.htm">Upload</a>
		<a class="active" href="#test">Test</a>
	</div>

	<div class="header">
		<h1>Test page</h1>
		<p>By group 39</p>
	</div>

	<!--Drop down menu-->
	<div class="dropdown">
		<button onclick="hideOrShow()" class="dropbutton">Select a background image</button>
		<div id="dropdown" class="content">
			<input type="text" placeholder="Search..." id="input" onkeyup="filterFunction()">
			<a href="#image1">
				Image 1
				<!--<script>
						var imageFile = "Provided_data/stimuli/01_Antwerpen_S1.jpg";
				</script>-->
			</a>
			<a href="#image2">
				Image 2
				<!--<script>
						var imageFile = "Provided_data/stimuli/02_Berlin_S1.jpg";
				</script>-->
			</a>
			<a href="#image3">Image 3</a>
			<a href="#image4">Image 4</a>
			<a href="#image5">Image 5</a>
			<a href="#image6">Image 6</a>
			<a href="#image7">Image 7</a>
		</div>
	</div>

	<!--Dit stukje javascript moet nog ergens anders gezet worden denk ik-->
	<script>
	function hideOrShow() {
		document.getElementById("dropdown").classList.toggle("show");
	}

	function filterFunction() {
		var input, filter, b, c;
		input = document.getElementById("input");
		filter = input.value.toUpperCase();
		div = document.getElementById("dropdown");
		b = div.getElementsByTagName("a");
		for (c = 0; c < b.length; c++) {
			txtValue = b[c].textContent || b[c].innerText;
			if (txtValue.toUpperCase().indexOf(filter) > -1) {
				b[c].style.display = "";
			} else {
				b[c].style.display = "none";
			}
		}
	}
	</script>


	<div class="grid_tools">
		<div class="tool1">tool1</div>
		<div class="tool2">tool2</div>
		<div class="tool3">tool3</div>
		<div class="tool4">tool4</div>
		<div class="tool5">tool5</div>
		<div class="tool6">tool6</div>
		<div class="tool7">tool7</div>
	</div>

	<div class="grid_linking">
		<div class="tools">tools</div>
		<div class="heatmapE">

			<div id="visContainerHM">
				<div id="visImgContainerHM">
						<img id="myImageHM">
				</div>
				<div id="visCanvasContainerHM">
					<canvas id="myCanvasHM"></canvas>
				</div>
			</div>

		</div>
		<div class="scarfplotE">

			<div id="visContainerSP">
				<div id="visImgContainerSP">
						<img id="myImageSP">
				</div>
				<div id="visCanvasContainerSP">
					<canvas id="myCanvasSP"></canvas>
				</div>
			</div>
			<div id="scarfPlotContainer">
				<canvas id="scarfCanvas"></canvas>
			</div>

		</div>
		<div class="scanpathE">
			<div id="visContainerSC">
				<div id="visImgContainerSC">
					<img id= "myImageSC">
				</div>
				<div id="visCanvasContainerSC">
					<canvas id="myCanvasSC" width="1650" height="1200"></canvas>
				</div>
			</div>
		</div>
		<div class="parallelSP">
			<div id="visContainerPSP">
				<div id="visCanvasContainerPSP">
					<canvas id="myCanvasPSP" width="1650" height="1200"></canvas>
				</div>
			</div>
		</div>
	</div>

	<div>
		<div id="AOISelection" style="width: 800px;font-size: 0">
			<img src="Provided_data/stimuli/01_Antwerpen_S1.jpg" style="width: 100%;z-index: 1" id="image">
		</div>
		<button>set</button>
	</div>


	<!--Temporary download buttons for the visualizations, please move them to a nicer spot and make them look better -->
	<input type="button" id="download_heatmap" value="Download heatmap"/>
	<input type="button" id="download_scarfplot" value="Download scarfplot"/>
	<input type="button" id="download_scanpath" value="Download scanpath"/>
	<input type="button" id="download_parallelscanpath" value="Download parallelscanpath"/>

	<script>
			//Execute php script to access image outside of webserver root directory
			var imagePath = "Scripts/getImage.php?img=" + imageName;

			<!--Drawing the heatmap-->
			var img = document.getElementById('myImageHM');
			var canvas = document.getElementById('myCanvasHM');
			var visContainerHM = document.getElementById('visContainerHM');
			var visImgContainerHM = document.getElementById('visImgContainerHM');
			var download_button = document.getElementById("download_heatmap");

			myHeatmap = new Heatmap(canvas, img);
			myHeatmap.setDownloadButton(download_button, canvas);
			myHeatmap.setData(mappedFixationPointX, mappedFixationPointY, duration, timestamp, user);
			myHeatmap.setImage(imagePath);
			myHeatmap.draw();


			<!--Drawing the scarfplot-->
			var img = document.getElementById('myImageSP');
			var canvas = document.getElementById('myCanvasSP');
			var visContainerSP = document.getElementById('visContainerSP');
			var visImgContainerSP = document.getElementById('visImgContainerSP');
			var scarfCanvas = document.getElementById('scarfCanvas');
			var scarfPlotContainer = document.getElementById('scarfPlotContainer');
			var download_button = document.getElementById("download_scarfplot");

			myScarfplot = new Scarfplot(canvas, scarfCanvas, img);
			myHeatmap.setDownloadButton(download_button, scarfCanvas)
			myScarfplot.setAoi(aoi);
			myScarfplot.setData(mappedFixationPointX, mappedFixationPointY, null, timestamp, user);
			//myScarfplot.setImage(imageFile);
			myScarfplot.setImage(imagePath);
			myScarfplot.draw();

			<!--Drawing the scanpath-->
			var size = 0.06;

			var img = document.getElementById('myImageSC');
			var canvas = document.getElementById('myCanvasSC');
			var visContainerSC = document.getElementById('visContainerSC');
			var visImgContainerSC = document.getElementById('visImgContainerSC');

			var width = visImgContainerSC.clientWidth;
			var height = visImgContainerSC.clientHeight;

			myScanpath = new Scanpath(canvas, img);
			myScanpath.setImage(imagePath);
			myScanpath.start(size);
	</script>

	<!--setting up the parallel scanpath-->
	<script>
		var canvas = document.getElementById('myCanvasPSP');
		var visContainerPSP = document.getElementById('visContainerPSP');


		myParallelScanpath = new ParallelScanpath(canvas);
	</script>


	<script>;
		var d = new data(imageName, init)

		function init(d){
			myParallelScanpath.draw(d);
		}

	</script>
	<script src="Scripts/Visualizations/AOIselection.js"></script>

</body>
</html>
